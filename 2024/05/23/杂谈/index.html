<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="近期会回国一趟, 推荐系统准备在飞机上看. 其他时间看的东西就都挺杂的, 每个部分都单独记录一下显得太短, 以杂谈形势整体记录一下大概差不多. leetcode(backtrack) 最近leetcode刷到了不少backtrack问题,感觉自己处理起来很不熟练, 简单记录下. 131. Palindrome Partitioning 给出一个字符串, 给出把这个字符串全部分割为回文串的方案. 1">
<meta property="og:type" content="article">
<meta property="og:title" content="杂谈">
<meta property="og:url" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/index.html">
<meta property="og:site_name" content="blacsheep&#39;s blog">
<meta property="og:description" content="近期会回国一趟, 推荐系统准备在飞机上看. 其他时间看的东西就都挺杂的, 每个部分都单独记录一下显得太短, 以杂谈形势整体记录一下大概差不多. leetcode(backtrack) 最近leetcode刷到了不少backtrack问题,感觉自己处理起来很不熟练, 简单记录下. 131. Palindrome Partitioning 给出一个字符串, 给出把这个字符串全部分割为回文串的方案. 1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/beautiful_subset.png">
<meta property="og:image" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/ControlNet.avif">
<meta property="og:image" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/clip_matrix.png">
<meta property="og:image" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/CLIP.png">
<meta property="article:published_time" content="2024-05-23T10:50:50.000Z">
<meta property="article:modified_time" content="2024-05-25T00:30:34.510Z">
<meta property="article:author" content="blacsheep">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/beautiful_subset.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>杂谈</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/06/03/DSA-greedy%E5%AD%A6%E4%B9%A0/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/05/17/%E5%B7%A5%E4%B8%9A%E7%95%8C%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3-2-%E7%B2%97%E6%8E%92%E7%B2%BE%E6%8E%92/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&text=杂谈"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&is_video=false&description=杂谈"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=杂谈&body=Check out this article: http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&name=杂谈&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&t=杂谈"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#leetcodebacktrack"><span class="toc-number">1.</span> <span class="toc-text">leetcode(backtrack)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#palindrome-partitioning"><span class="toc-number">1.1.</span> <span class="toc-text">131. Palindrome Partitioning</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E6%BA%AF%E5%86%99%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">回溯写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp"><span class="toc-number">1.1.2.</span> <span class="toc-text">dp</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#the-number-of-beautiful-subsets"><span class="toc-number">1.2.</span> <span class="toc-text">2597. The Number of Beautiful
Subsets</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90"><span class="toc-number">1.2.1.</span> <span class="toc-text">简单分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">dp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack"><span class="toc-number">1.2.3.</span> <span class="toc-text">backtrack</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#maximum-score-words-formed-by-letters"><span class="toc-number">1.3.</span> <span class="toc-text">1255. Maximum Score Words
Formed by Letters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">backtrack</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#word-break-ii"><span class="toc-number">1.4.</span> <span class="toc-text">140. Word Break II</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack-2"><span class="toc-number">1.4.1.</span> <span class="toc-text">backtrack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp-2"><span class="toc-number">1.4.2.</span> <span class="toc-text">dp</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lora-and-controlnet"><span class="toc-number">2.</span> <span class="toc-text">LORA and ControlNet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lora"><span class="toc-number">2.1.</span> <span class="toc-text">LoRA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#controlnet"><span class="toc-number">2.2.</span> <span class="toc-text">ControlNet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clip-and-stable-diffusion"><span class="toc-number">3.</span> <span class="toc-text">CLIP and Stable Diffusion</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#clip"><span class="toc-number">3.1.</span> <span class="toc-text">CLIP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#llm-agent"><span class="toc-number">4.</span> <span class="toc-text">LLM Agent</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        杂谈
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">blacsheep</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-05-23T10:50:50.000Z" class="dt-published" itemprop="datePublished">2024-05-23</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>近期会回国一趟, 推荐系统准备在飞机上看. 其他时间看的东西就都挺杂的,
每个部分都单独记录一下显得太短, 以杂谈形势整体记录一下大概差不多.</p>
<h2 id="leetcodebacktrack">leetcode(backtrack)</h2>
<p>最近leetcode刷到了不少backtrack问题,感觉自己处理起来很不熟练,
简单记录下.</p>
<h3 id="palindrome-partitioning">131. Palindrome Partitioning</h3>
<p>给出一个字符串, 给出把这个字符串全部分割为回文串的方案.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line">    Input: s = &quot;aab&quot;</span><br><span class="line">    Output: [[&quot;a&quot;,&quot;a&quot;,&quot;b&quot;],[&quot;aa&quot;,&quot;b&quot;]]</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">    Input: s = &quot;a&quot;</span><br><span class="line">    Output: [[&quot;a&quot;]]</span><br></pre></td></tr></table></figure>
<h4 id="回溯写法">回溯写法</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">start, lst</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            <span class="keyword">if</span> start == <span class="built_in">len</span>(s):</span><br><span class="line">                ans.append(lst)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> end <span class="keyword">in</span> <span class="built_in">range</span>(start+<span class="number">1</span>, <span class="built_in">len</span>(s)+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> s[start:end] == s[start:end][::-<span class="number">1</span>]:</span><br><span class="line">                    backtrack(end, lst+[s[start:end]])</span><br><span class="line">        ans = []</span><br><span class="line">        backtrack(<span class="number">0</span>, [])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<h4 id="dp">dp</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]:</span><br><span class="line">        dp = []</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>):</span><br><span class="line">            dp.append([])</span><br><span class="line">        dp[-<span class="number">1</span>].append([])</span><br><span class="line">        <span class="comment"># start from i</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="comment"># check palindrome s[i:j]</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">                sub = s[i:j]</span><br><span class="line">                <span class="keyword">if</span> sub == sub[::-<span class="number">1</span>]:</span><br><span class="line">                    <span class="keyword">for</span> lst <span class="keyword">in</span> dp[j]:</span><br><span class="line">                        dp[i].append([sub] + lst)</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h3 id="the-number-of-beautiful-subsets">2597. The Number of Beautiful
Subsets</h3>
<p>You are given an array <code>nums</code> of positive integers and a
<strong>positive</strong> integer <code>k</code>.</p>
<p>A subset of <code>nums</code> is <strong>beautiful</strong> if it
does not contain two integers with an absolute difference equal to
<code>k</code>.</p>
<p>Return the number of <strong>non-empty beautiful</strong> subsets of
the array <code>nums</code>.</p>
<p>A subset of <code>nums</code> is an array that can be obtained by
deleting some (possibly none) elements from <code>nums</code>. Two
subsets are different if and only if the chosen indices to delete are
different.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line">    Input: nums = [2,4,6], k = 2</span><br><span class="line">    Output: 4</span><br><span class="line">    Explanation: The beautiful subsets of the array nums are: [2], [4], [6], [2, 6].</span><br><span class="line">    It can be proved that there are only 4 beautiful subsets in the array [2,4,6].</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">    Input: nums = [1], k = 1</span><br><span class="line">    Output: 1</span><br><span class="line">    Explanation: The beautiful subset of the array nums is [1].</span><br><span class="line">    It can be proved that there is only 1 beautiful subset in the array [1].</span><br></pre></td></tr></table></figure>
<h4 id="简单分析">简单分析</h4>
<p>有一说一这题的分析还是有一些复杂的, 起码不是非常无脑的dp和回溯.</p>
<p>首先整个字符串上的问题可以划分为求不同子集上面的beautiful subsets.
参考<a
target="_blank" rel="noopener" href="https://leetcode.com/problems/the-number-of-beautiful-subsets/solutions/3363862/c-java-python-evolve-brute-force-to-dp-explained-7-approaches">[C++,
Java, Python] Evolve Brute Force to DP | Explained 7 Approaches</a></p>
<p><img src="beautiful_subset.png" /></p>
<p>在这之后, 对于每个counter里面的每一个值,
我们可以take也可以选择skip:</p>
<ul>
<li>如果我们选择take, 那么需要判断i+1的可取性:
<ul>
<li>如果i+1恰好是<code>s[i]+k</code>, 那我们只能取count(i+2)<br />
</li>
<li>否则我们取count(i+1)<br />
</li>
</ul></li>
<li>如果我们选择skip, 就直接取下一个i的值, count(i+1)</li>
</ul>
<p>而take又会面临重复值的问题, 我们可以有2**n - 1种可能(除去空集).</p>
<h4 id="dp-1">dp</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">beautifulSubsets</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        result = <span class="number">1</span></span><br><span class="line">        freq = defaultdict(collections.Counter)</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> nums:</span><br><span class="line">            freq[x % k][x] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> fr <span class="keyword">in</span> freq.values():</span><br><span class="line">            n = <span class="built_in">len</span>(fr)</span><br><span class="line">            s = <span class="built_in">sorted</span>(fr.items())</span><br><span class="line">            count = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">            count[n] = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                skip = count[i + <span class="number">1</span>]</span><br><span class="line">                take = <span class="number">2</span> ** s[i][<span class="number">1</span>] - <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> i + <span class="number">1</span> &lt; n <span class="keyword">and</span> s[i + <span class="number">1</span>][<span class="number">0</span>] - s[i][<span class="number">0</span>] == k:</span><br><span class="line">                    take *= count[i + <span class="number">2</span>]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    take *= count[i + <span class="number">1</span>]</span><br><span class="line">                count[i] = skip + take</span><br><span class="line">            result *= count[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> result - <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="backtrack">backtrack</h4>
<p>思路类似<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">beautifulSubsets</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        result = <span class="number">1</span></span><br><span class="line">        freq = defaultdict(collections.Counter)</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> nums:</span><br><span class="line">            freq[x % k][x] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> fr <span class="keyword">in</span> freq.values():</span><br><span class="line">            s = <span class="built_in">sorted</span>(fr.items())</span><br><span class="line"><span class="meta">            @cache</span></span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">i: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">                <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">                skip = f(i + <span class="number">1</span>)</span><br><span class="line">                take = <span class="number">2</span> ** s[i][<span class="number">1</span>] - <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> i + <span class="number">1</span> &lt; <span class="built_in">len</span>(s) <span class="keyword">and</span> s[i + <span class="number">1</span>][<span class="number">0</span>] - s[i][<span class="number">0</span>] == k:</span><br><span class="line">                    take *= f(i + <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    take *= f(i + <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> skip + take</span><br><span class="line">            result *= f(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> result - <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h3 id="maximum-score-words-formed-by-letters">1255. Maximum Score Words
Formed by Letters</h3>
<p>本来以为差不多了, 结果今天签到又是backtrack.</p>
<p>Given a list of <code>words</code>, list of single
<code>letters</code> (might be repeating) and <code>score</code> of
every character.</p>
<p>Return the maximum score of <strong>any</strong> valid set of words
formed by using the given letters (<code>words[i]</code> cannot be used
two or more times).</p>
<p>It is not necessary to use all characters in <code>letters</code> and
each letter can only be used once. Score of letters
<code>'a', 'b', 'c', ... ,'z'</code> is given by
<code>score[0], score[1], ... , score[25]</code> respectively.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Example 1:  </span><br><span class="line">    Input: words = [&quot;dog&quot;,&quot;cat&quot;,&quot;dad&quot;,&quot;good&quot;], letters = [&quot;a&quot;,&quot;a&quot;,&quot;c&quot;,&quot;d&quot;,&quot;d&quot;,&quot;d&quot;,&quot;g&quot;,&quot;o&quot;,&quot;o&quot;], score = [1,0,9,5,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0]</span><br><span class="line">    Output: 23</span><br><span class="line">    Explanation:</span><br><span class="line">    Score  a=1, c=9, d=5, g=3, o=2</span><br><span class="line">    Given letters, we can form the words &quot;dad&quot; (5+1+5) and &quot;good&quot; (3+2+2+5) with a score of 23.</span><br><span class="line">    Words &quot;dad&quot; and &quot;dog&quot; only get a score of 21.</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">    Input: words = [&quot;xxxz&quot;,&quot;ax&quot;,&quot;bx&quot;,&quot;cx&quot;], letters = [&quot;z&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;x&quot;,&quot;x&quot;,&quot;x&quot;], score = [4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,10]</span><br><span class="line">    Output: 27</span><br><span class="line">    Explanation:</span><br><span class="line">    Score  a=4, b=4, c=4, x=5, z=10</span><br><span class="line">    Given letters, we can form the words &quot;ax&quot; (4+5), &quot;bx&quot; (4+5) and &quot;cx&quot; (4+5) with a score of 27.</span><br><span class="line">    Word &quot;xxxz&quot; only get a score of 25.</span><br><span class="line"></span><br><span class="line">Example 3:</span><br><span class="line">    Input: words = [&quot;leetcode&quot;], letters = [&quot;l&quot;,&quot;e&quot;,&quot;t&quot;,&quot;c&quot;,&quot;o&quot;,&quot;d&quot;], score = [0,0,1,1,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0]</span><br><span class="line">    Output: 0</span><br><span class="line">    Explanation:</span><br><span class="line">    Letter &quot;e&quot; can only be used once.</span><br></pre></td></tr></table></figure>
<p>题目又长又复杂, 我还理解错了一次, 不过写起来不算难,
需要注意的是每个单词只能用一次, 我一开始以为可以用多次,
backtract里面的index并没有加1, 加1之后AC.</p>
<h4 id="backtrack-1">backtrack</h4>
<p>非常直观的backtrack<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxScoreWords</span>(<span class="params">self, words: <span class="type">List</span>[<span class="built_in">str</span>], letters: <span class="type">List</span>[<span class="built_in">str</span>], score: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        ctr = Counter(letters)</span><br><span class="line">        s_lst = []</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            w_score = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> char <span class="keyword">in</span> word:</span><br><span class="line">                w_score += score[<span class="built_in">ord</span>(char) - <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)]</span><br><span class="line">            s_lst.append(w_score)</span><br><span class="line">        word_score_lst = <span class="built_in">list</span>(<span class="built_in">zip</span>(words, s_lst))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">ifcontain</span>(<span class="params">word, ctr</span>):</span><br><span class="line">            w_ctr = Counter(word)</span><br><span class="line">            <span class="keyword">for</span> k, v <span class="keyword">in</span> w_ctr.items():</span><br><span class="line">                <span class="keyword">if</span> ctr.get(k) <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> ctr.get(k) &lt; v:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">word_idx, tmp_ctr, tmp_score</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(word_idx, <span class="built_in">len</span>(words)):</span><br><span class="line">                <span class="keyword">if</span> ifcontain(words[idx], tmp_ctr):</span><br><span class="line">                    backtrack(idx+<span class="number">1</span>, tmp_ctr - Counter(words[idx]), tmp_score + word_score_lst[idx][<span class="number">1</span>])</span><br><span class="line">            ans.append(tmp_score)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        ans = []</span><br><span class="line">        backtrack(<span class="number">0</span>, ctr, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(ans) <span class="keyword">if</span> <span class="built_in">len</span>(ans) &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<h3 id="word-break-ii">140. Word Break II</h3>
<p>Given a string <code>s</code> and a dictionary of strings
<code>wordDict</code>, add spaces in <code>s</code> to construct a
sentence where each word is a valid dictionary word. Return all such
possible sentences in any order.</p>
<p>Note that the same word in the dictionary may be reused multiple
times in the segmentation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line">    Input: s = &quot;catsanddog&quot;, wordDict = [&quot;cat&quot;,&quot;cats&quot;,&quot;and&quot;,&quot;sand&quot;,&quot;dog&quot;]</span><br><span class="line">    Output: [&quot;cats and dog&quot;,&quot;cat sand dog&quot;]</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">    Input: s = &quot;pineapplepenapple&quot;, wordDict = [&quot;apple&quot;,&quot;pen&quot;,&quot;applepen&quot;,&quot;pine&quot;,&quot;pineapple&quot;]</span><br><span class="line">    Output: [&quot;pine apple pen apple&quot;,&quot;pineapple pen apple&quot;,&quot;pine applepen apple&quot;]</span><br><span class="line">    Explanation: Note that you are allowed to reuse a dictionary word.</span><br><span class="line"></span><br><span class="line">Example 3:</span><br><span class="line">    Input: s = &quot;catsandog&quot;, wordDict = [&quot;cats&quot;,&quot;dog&quot;,&quot;sand&quot;,&quot;and&quot;,&quot;cat&quot;]</span><br><span class="line">    Output: []</span><br></pre></td></tr></table></figure>
<h4 id="backtrack-2">backtrack</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wordBreak</span>(<span class="params">self, s: <span class="built_in">str</span>, wordDict: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        ans = []</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">i, string</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                ans.append(string)</span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> wordDict:</span><br><span class="line">                w_l = <span class="built_in">len</span>(word)</span><br><span class="line">                <span class="keyword">if</span> s[i:i+w_l] == word:</span><br><span class="line">                    <span class="keyword">if</span> string:</span><br><span class="line">                        backtrack(i+w_l, string+<span class="string">&#x27; &#x27;</span>+word)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        backtrack(i+w_l, word)</span><br><span class="line"></span><br><span class="line">        backtrack(<span class="number">0</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<h4 id="dp-2">dp</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wordBreak</span>(<span class="params">self, s: <span class="built_in">str</span>, wordDict: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        dp = [[] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        dp.append([<span class="string">&#x27;&#x27;</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> wordDict:</span><br><span class="line">                w_l = <span class="built_in">len</span>(word)</span><br><span class="line">                <span class="keyword">if</span> i+w_l &lt;= n <span class="keyword">and</span> s[i:i+w_l] == word:</span><br><span class="line">                    <span class="keyword">for</span> string <span class="keyword">in</span> dp[i+w_l]:</span><br><span class="line">                        <span class="keyword">if</span> string:</span><br><span class="line">                            dp[i].append(word + <span class="string">&#x27; &#x27;</span> + string)</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            dp[i].append(word)</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h2 id="lora-and-controlnet">LORA and ControlNet</h2>
<p><a
target="_blank" rel="noopener" href="https://blog.csdn.net/colorant/article/details/136732221">快速理解AIGC图像控制利器ControlNet和Lora的架构原理</a></p>
<p>之前只了解了LoRA是给大模型加了一个side
adapter从而进行小参数训练让模型能适应特定任务,
但后面看到ControlNet发现原理似乎有点类似,
所以这里仔细了解了一下细节.</p>
<h3 id="lora">LoRA</h3>
<blockquote>
<p>从数学的角度来说，一个矩阵的信息密度，大体可以用矩阵的“秩”（Rank）来粗略衡量（这也是LoRA中Rank的语义来源）.
LoRA的方式是把旁路的矩阵替换成两个低秩矩阵的乘积。比如1000x1000的矩阵，用1000x2
和
2x1000的矩阵来替换，后者两个矩阵乘积运算的结果也是一个1000x1000的矩阵，也就是输入和输出可以和原矩阵的维度相匹配，但秩的上限就只有2了（因为按秩的定义，结果矩阵可以用相乘的两个矩阵的两行或两列数据的四则运算得到所有行列的数据）</p>
</blockquote>
<p>所以理论最佳方式是LoRA可以利用参数矩阵包含的信息密度上限,
从而降低需要的参数上百倍.</p>
<h3 id="controlnet">ControlNet</h3>
<blockquote>
<p>ControlNet对原模型的参数矩阵并没有进行压缩，而是进行了1比1的精确复刻。当然他并没有复刻所有的模型层次，而是只复刻了部分编码层的模型参数结构。实际应用中，是将每一层编码层的输出结果通过一些线性变换再混合回原模型的解码层中来实现对最终输出效果的干预和控制。</p>
</blockquote>
<p>因此ControlNet一般会比LoRA大一些,</p>
<p><img src="ControlNet.avif" /></p>
<p>其次就是LoRA一般是控制图片风格层面,
而ControlNet一般是从图片层面干预输出,
从而可以让输出的图片和输入的图片有相同动作.</p>
<h2 id="clip-and-stable-diffusion">CLIP and Stable Diffusion</h2>
<p>之前看的LDM和Stable Diffusion v1其实text encoder用的都是bert,
但后面的SDv2里面就已经换成了CLIP, 顺带一提再后来的SDXL相对于SD又有</p>
<ol type="1">
<li>UNet大小层面的升级<br />
</li>
<li>尺寸和裁剪的处理<br />
</li>
<li>加了refiner对生成的图片加了细节处理</li>
</ol>
<h3 id="clip">CLIP</h3>
<p>全称Contrastive Language–Image Pre-training, 多模态相关.
在图文并行的模型中表现突出</p>
<p>简单来说就是对图进行编码生成向量v_img, 对文本编码生成v_text,
然后做对比学习, 让图文匹配的
<code>$ v_&#123;img&#125; \cdot v_&#123;text&#125;$</code>向1靠, 让不匹配的向0靠.</p>
<p><img src="clip_matrix.png" /></p>
<p><strong>为什么不用prediction而用contrast</strong>:</p>
<p><img src="CLIP.png" /></p>
<h2 id="llm-agent">LLM Agent</h2>
<blockquote>
<p>Agent = LLM + Memory + planning skills + tool use</p>
</blockquote>
<p>大概来说就是LLM作为中枢大脑, 可以进行自我规划, 对任务进行自行分解,
自我提示, 以及调用外部工具从而达到某些目的的智能体.</p>
<p>代表有AutoGPT等</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#leetcodebacktrack"><span class="toc-number">1.</span> <span class="toc-text">leetcode(backtrack)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#palindrome-partitioning"><span class="toc-number">1.1.</span> <span class="toc-text">131. Palindrome Partitioning</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E6%BA%AF%E5%86%99%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">回溯写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp"><span class="toc-number">1.1.2.</span> <span class="toc-text">dp</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#the-number-of-beautiful-subsets"><span class="toc-number">1.2.</span> <span class="toc-text">2597. The Number of Beautiful
Subsets</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90"><span class="toc-number">1.2.1.</span> <span class="toc-text">简单分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">dp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack"><span class="toc-number">1.2.3.</span> <span class="toc-text">backtrack</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#maximum-score-words-formed-by-letters"><span class="toc-number">1.3.</span> <span class="toc-text">1255. Maximum Score Words
Formed by Letters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">backtrack</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#word-break-ii"><span class="toc-number">1.4.</span> <span class="toc-text">140. Word Break II</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backtrack-2"><span class="toc-number">1.4.1.</span> <span class="toc-text">backtrack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dp-2"><span class="toc-number">1.4.2.</span> <span class="toc-text">dp</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lora-and-controlnet"><span class="toc-number">2.</span> <span class="toc-text">LORA and ControlNet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lora"><span class="toc-number">2.1.</span> <span class="toc-text">LoRA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#controlnet"><span class="toc-number">2.2.</span> <span class="toc-text">ControlNet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clip-and-stable-diffusion"><span class="toc-number">3.</span> <span class="toc-text">CLIP and Stable Diffusion</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#clip"><span class="toc-number">3.1.</span> <span class="toc-text">CLIP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#llm-agent"><span class="toc-number">4.</span> <span class="toc-text">LLM Agent</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&text=杂谈"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&is_video=false&description=杂谈"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=杂谈&body=Check out this article: http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&title=杂谈"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&name=杂谈&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2024/05/23/%E6%9D%82%E8%B0%88/&t=杂谈"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2025
    blacsheep
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
